<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>اختبار تكامل Firebase - شارك سيارتك</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <nav class="navbar">
            <div class="nav-container">
                <div class="nav-logo">
                    <i class="fas fa-car"></i>
                    <span>شارك سيارتك</span>
                </div>
                <ul class="nav-menu">
                    <li><a href="index.html">الرئيسية</a></li>
                    <li><a href="test-firebase-integration.html" class="active">اختبار Firebase</a></li>
                </ul>
            </div>
        </nav>
    </header>

    <!-- Test Section -->
    <section class="test-section">
        <div class="container">
            <div class="test-header">
                <h1>اختبار تكامل Firebase</h1>
                <p>أداة شاملة لاختبار جميع وظائف Firebase في النظام</p>
            </div>

            <!-- Firebase Status -->
            <div class="status-section">
                <h3>حالة Firebase</h3>
                <div class="status-grid">
                    <div class="status-card" id="firebaseStatus">
                        <i class="fas fa-fire"></i>
                        <div class="status-content">
                            <span class="status-label">حالة Firebase</span>
                            <span class="status-value">جاري التحقق...</span>
                        </div>
                    </div>
                    <div class="status-card" id="authStatus">
                        <i class="fas fa-user-check"></i>
                        <div class="status-content">
                            <span class="status-label">المصادقة</span>
                            <span class="status-value">غير متصل</span>
                        </div>
                    </div>
                    <div class="status-card" id="databaseStatus">
                        <i class="fas fa-database"></i>
                        <div class="status-content">
                            <span class="status-label">قاعدة البيانات</span>
                            <span class="status-value">غير متصل</span>
                        </div>
                    </div>
                    <div class="status-card" id="storageStatus">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <div class="status-content">
                            <span class="status-label">التخزين</span>
                            <span class="status-value">غير متصل</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Authentication Tests -->
            <div class="test-category">
                <h3>اختبارات المصادقة</h3>
                <div class="test-grid">
                    <div class="test-card">
                        <h4>إنشاء حساب تجريبي</h4>
                        <div class="test-form">
                            <input type="email" id="testEmail" placeholder="البريد الإلكتروني" value="test@example.com">
                            <input type="password" id="testPassword" placeholder="كلمة المرور" value="123456">
                            <select id="testUserType">
                                <option value="renter">مستأجر</option>
                                <option value="owner">صاحب سيارة</option>
                            </select>
                            <button class="btn btn-primary" onclick="testCreateUser()">
                                <i class="fas fa-user-plus"></i>
                                إنشاء حساب
                            </button>
                        </div>
                    </div>

                    <div class="test-card">
                        <h4>تسجيل الدخول</h4>
                        <div class="test-form">
                            <input type="email" id="loginEmail" placeholder="البريد الإلكتروني">
                            <input type="password" id="loginPassword" placeholder="كلمة المرور">
                            <button class="btn btn-success" onclick="testLogin()">
                                <i class="fas fa-sign-in-alt"></i>
                                تسجيل الدخول
                            </button>
                        </div>
                    </div>

                    <div class="test-card">
                        <h4>معلومات المستخدم الحالي</h4>
                        <div class="user-info" id="currentUserInfo">
                            <p>لا يوجد مستخدم مسجل الدخول</p>
                        </div>
                        <button class="btn btn-outline" onclick="testGetCurrentUser()">
                            <i class="fas fa-user"></i>
                            تحديث المعلومات
                        </button>
                    </div>

                    <div class="test-card">
                        <h4>تسجيل الخروج</h4>
                        <button class="btn btn-danger" onclick="testLogout()">
                            <i class="fas fa-sign-out-alt"></i>
                            تسجيل الخروج
                        </button>
                    </div>
                </div>
            </div>

            <!-- Database Tests -->
            <div class="test-category">
                <h3>اختبارات قاعدة البيانات</h3>
                <div class="test-grid">
                    <div class="test-card">
                        <h4>إنشاء سيارة تجريبية</h4>
                        <div class="test-form">
                            <input type="text" id="carBrand" placeholder="الماركة" value="تويوتا">
                            <input type="text" id="carModel" placeholder="الموديل" value="كامري">
                            <input type="number" id="carYear" placeholder="السنة" value="2022">
                            <input type="number" id="carPrice" placeholder="السعر اليومي" value="150">
                            <textarea id="carDescription" placeholder="الوصف">سيارة ممتازة للاستئجار</textarea>
                            <button class="btn btn-primary" onclick="testCreateCar()">
                                <i class="fas fa-car"></i>
                                إضافة سيارة
                            </button>
                        </div>
                    </div>

                    <div class="test-card">
                        <h4>عرض السيارات</h4>
                        <div class="cars-list" id="carsList">
                            <p>لا توجد سيارات</p>
                        </div>
                        <button class="btn btn-outline" onclick="testGetCars()">
                            <i class="fas fa-list"></i>
                            تحديث القائمة
                        </button>
                    </div>

                    <div class="test-card">
                        <h4>إنشاء حجز تجريبي</h4>
                        <div class="test-form">
                            <input type="text" id="bookingCarId" placeholder="معرف السيارة">
                            <input type="date" id="startDate" placeholder="تاريخ البداية">
                            <input type="date" id="endDate" placeholder="تاريخ النهاية">
                            <input type="number" id="totalPrice" placeholder="السعر الإجمالي" value="300">
                            <button class="btn btn-primary" onclick="testCreateBooking()">
                                <i class="fas fa-calendar-plus"></i>
                                إنشاء حجز
                            </button>
                        </div>
                    </div>

                    <div class="test-card">
                        <h4>عرض الحجوزات</h4>
                        <div class="bookings-list" id="bookingsList">
                            <p>لا توجد حجوزات</p>
                        </div>
                        <button class="btn btn-outline" onclick="testGetBookings()">
                            <i class="fas fa-list"></i>
                            تحديث القائمة
                        </button>
                    </div>
                </div>
            </div>

            <!-- Storage Tests -->
            <div class="test-category">
                <h3>اختبارات التخزين</h3>
                <div class="test-grid">
                    <div class="test-card">
                        <h4>رفع صورة تجريبية</h4>
                        <div class="test-form">
                            <input type="file" id="testImage" accept="image/*">
                            <input type="text" id="photoCarId" placeholder="معرف السيارة">
                            <button class="btn btn-primary" onclick="testUploadPhoto()">
                                <i class="fas fa-upload"></i>
                                رفع الصورة
                            </button>
                        </div>
                    </div>

                    <div class="test-card">
                        <h4>عرض الصور</h4>
                        <div class="photos-list" id="photosList">
                            <p>لا توجد صور</p>
                        </div>
                        <button class="btn btn-outline" onclick="testGetPhotos()">
                            <i class="fas fa-images"></i>
                            تحديث القائمة
                        </button>
                    </div>
                </div>
            </div>

            <!-- Real-time Tests -->
            <div class="test-category">
                <h3>اختبارات الوقت الفعلي</h3>
                <div class="test-grid">
                    <div class="test-card">
                        <h4>الاستماع لتغييرات السيارات</h4>
                        <div class="realtime-status" id="carsRealtimeStatus">
                            <span class="status-indicator inactive"></span>
                            <span>غير نشط</span>
                        </div>
                        <button class="btn btn-success" onclick="testCarsRealtime()">
                            <i class="fas fa-play"></i>
                            بدء الاستماع
                        </button>
                        <button class="btn btn-danger" onclick="stopCarsRealtime()">
                            <i class="fas fa-stop"></i>
                            إيقاف الاستماع
                        </button>
                    </div>

                    <div class="test-card">
                        <h4>الاستماع لتغييرات الحجوزات</h4>
                        <div class="realtime-status" id="bookingsRealtimeStatus">
                            <span class="status-indicator inactive"></span>
                            <span>غير نشط</span>
                        </div>
                        <button class="btn btn-success" onclick="testBookingsRealtime()">
                            <i class="fas fa-play"></i>
                            بدء الاستماع
                        </button>
                        <button class="btn btn-danger" onclick="stopBookingsRealtime()">
                            <i class="fas fa-stop"></i>
                            إيقاف الاستماع
                        </button>
                    </div>
                </div>
            </div>

            <!-- Data Management -->
            <div class="test-category">
                <h3>إدارة البيانات</h3>
                <div class="test-grid">
                    <div class="test-card">
                        <h4>حذف البيانات التجريبية</h4>
                        <div class="delete-options">
                            <label>
                                <input type="checkbox" id="deleteUsers"> حذف المستخدمين التجريبيين
                            </label>
                            <label>
                                <input type="checkbox" id="deleteCars"> حذف السيارات التجريبية
                            </label>
                            <label>
                                <input type="checkbox" id="deleteBookings"> حذف الحجوزات التجريبية
                            </label>
                            <label>
                                <input type="checkbox" id="deletePhotos"> حذف الصور التجريبية
                            </label>
                        </div>
                        <button class="btn btn-danger" onclick="testCleanupData()">
                            <i class="fas fa-trash"></i>
                            حذف البيانات المحددة
                        </button>
                    </div>

                    <div class="test-card">
                        <h4>تصدير البيانات</h4>
                        <button class="btn btn-outline" onclick="testExportData()">
                            <i class="fas fa-download"></i>
                            تصدير جميع البيانات
                        </button>
                    </div>
                </div>
            </div>

            <!-- Results Display -->
            <div class="results-section">
                <h3>نتائج الاختبارات</h3>
                <div id="testResults" class="test-results">
                    <p>لم يتم تنفيذ أي اختبار بعد</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-storage-compat.js"></script>
    
    <!-- Firebase Service -->
    <script src="firebase-service.js"></script>
    
    <script>
        let carsListener = null;
        let bookingsListener = null;

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            checkFirebaseStatus();
            setupTestData();
        });

        // Check Firebase status
        async function checkFirebaseStatus() {
            try {
                // Check Firebase initialization
                if (typeof firebase !== 'undefined' && firebase.apps.length > 0) {
                    updateStatus('firebaseStatus', 'متصل', 'success');
                } else {
                    updateStatus('firebaseStatus', 'غير متصل', 'error');
                    return;
                }

                // Check Authentication
                try {
                    await firebase.auth().signInAnonymously();
                    updateStatus('authStatus', 'متصل', 'success');
                    await firebase.auth().signOut();
                } catch (error) {
                    updateStatus('authStatus', 'خطأ في المصادقة', 'error');
                }

                // Check Database
                try {
                    const testRef = firebase.database().ref('test');
                    await testRef.set({ timestamp: Date.now() });
                    await testRef.remove();
                    updateStatus('databaseStatus', 'متصل', 'success');
                } catch (error) {
                    updateStatus('databaseStatus', 'خطأ في قاعدة البيانات', 'error');
                }

                // Check Storage
                try {
                    const testRef = firebase.storage().ref('test.txt');
                    const testBlob = new Blob(['test'], { type: 'text/plain' });
                    await testRef.put(testBlob);
                    await testRef.delete();
                    updateStatus('storageStatus', 'متصل', 'success');
                } catch (error) {
                    updateStatus('storageStatus', 'خطأ في التخزين', 'error');
                }

            } catch (error) {
                console.error('Error checking Firebase status:', error);
                updateStatus('firebaseStatus', 'خطأ في الاتصال', 'error');
            }
        }

        // Update status display
        function updateStatus(elementId, value, type) {
            const element = document.getElementById(elementId);
            const statusValue = element.querySelector('.status-value');
            statusValue.textContent = value;
            statusValue.className = `status-value ${type}`;
        }

        // Setup test data
        function setupTestData() {
            // Set default dates
            const today = new Date();
            const tomorrow = new Date(today);
            tomorrow.setDate(tomorrow.getDate() + 1);
            const dayAfter = new Date(today);
            dayAfter.setDate(dayAfter.getDate() + 2);

            document.getElementById('startDate').value = tomorrow.toISOString().split('T')[0];
            document.getElementById('endDate').value = dayAfter.toISOString().split('T')[0];
        }

        // Test create user
        async function testCreateUser() {
            try {
                const email = document.getElementById('testEmail').value;
                const password = document.getElementById('testPassword').value;
                const userType = document.getElementById('testUserType').value;

                const userData = {
                    full_name: 'مستخدم تجريبي',
                    email: email,
                    phone: '+966501234567',
                    city: 'الرياض',
                    user_type: userType,
                    password: password
                };

                const result = await firebaseService.registerUser(userData);
                addTestResult('✅ تم إنشاء المستخدم بنجاح: ' + result.user.uid, 'success');
                
                // Update login form
                document.getElementById('loginEmail').value = email;
                document.getElementById('loginPassword').value = password;

            } catch (error) {
                addTestResult('❌ خطأ في إنشاء المستخدم: ' + error.message, 'error');
            }
        }

        // Test login
        async function testLogin() {
            try {
                const email = document.getElementById('loginEmail').value;
                const password = document.getElementById('loginPassword').value;

                const result = await firebaseService.loginUser(email, password);
                addTestResult('✅ تم تسجيل الدخول بنجاح: ' + result.user.uid, 'success');
                
                // Update current user info
                testGetCurrentUser();

            } catch (error) {
                addTestResult('❌ خطأ في تسجيل الدخول: ' + error.message, 'error');
            }
        }

        // Test get current user
        async function testGetCurrentUser() {
            try {
                const user = firebaseService.getCurrentUser();
                const profile = await firebaseService.getCurrentUserProfile();
                
                const userInfo = document.getElementById('currentUserInfo');
                
                if (user && profile) {
                    userInfo.innerHTML = `
                        <div class="user-details">
                            <p><strong>الاسم:</strong> ${profile.full_name}</p>
                            <p><strong>البريد الإلكتروني:</strong> ${profile.email}</p>
                            <p><strong>نوع المستخدم:</strong> ${profile.user_type === 'renter' ? 'مستأجر' : 'صاحب سيارة'}</p>
                            <p><strong>المدينة:</strong> ${profile.city}</p>
                        </div>
                    `;
                } else {
                    userInfo.innerHTML = '<p>لا يوجد مستخدم مسجل الدخول</p>';
                }

            } catch (error) {
                addTestResult('❌ خطأ في جلب معلومات المستخدم: ' + error.message, 'error');
            }
        }

        // Test logout
        async function testLogout() {
            try {
                await firebaseService.logoutUser();
                addTestResult('✅ تم تسجيل الخروج بنجاح', 'success');
                
                // Clear user info
                document.getElementById('currentUserInfo').innerHTML = '<p>لا يوجد مستخدم مسجل الدخول</p>';

            } catch (error) {
                addTestResult('❌ خطأ في تسجيل الخروج: ' + error.message, 'error');
            }
        }

        // Test create car
        async function testCreateCar() {
            try {
                const carData = {
                    brand: document.getElementById('carBrand').value,
                    model: document.getElementById('carModel').value,
                    year: parseInt(document.getElementById('carYear').value),
                    price_per_day: parseInt(document.getElementById('carPrice').value),
                    location: 'الرياض',
                    description: document.getElementById('carDescription').value
                };

                const car = await firebaseService.createCar(carData);
                addTestResult('✅ تم إنشاء السيارة بنجاح: ' + car.id, 'success');
                
                // Update booking form
                document.getElementById('bookingCarId').value = car.id;

            } catch (error) {
                addTestResult('❌ خطأ في إنشاء السيارة: ' + error.message, 'error');
            }
        }

        // Test get cars
        async function testGetCars() {
            try {
                const cars = await firebaseService.getAllCars();
                const carsList = document.getElementById('carsList');
                
                if (cars.length > 0) {
                    carsList.innerHTML = cars.map(car => `
                        <div class="car-item">
                            <strong>${car.brand} ${car.model}</strong>
                            <small>السعر: ${car.price_per_day} ريال/يوم</small>
                            <small>الحالة: ${car.is_available ? 'متاحة' : 'غير متاحة'}</small>
                        </div>
                    `).join('');
                } else {
                    carsList.innerHTML = '<p>لا توجد سيارات</p>';
                }

                addTestResult(`✅ تم جلب ${cars.length} سيارة`, 'success');

            } catch (error) {
                addTestResult('❌ خطأ في جلب السيارات: ' + error.message, 'error');
            }
        }

        // Test create booking
        async function testCreateBooking() {
            try {
                const bookingData = {
                    car_id: document.getElementById('bookingCarId').value,
                    owner_id: 'test-owner-id',
                    start_date: document.getElementById('startDate').value,
                    end_date: document.getElementById('endDate').value,
                    total_price: parseInt(document.getElementById('totalPrice').value)
                };

                const booking = await firebaseService.createBooking(bookingData);
                addTestResult('✅ تم إنشاء الحجز بنجاح: ' + booking.id, 'success');

            } catch (error) {
                addTestResult('❌ خطأ في إنشاء الحجز: ' + error.message, 'error');
            }
        }

        // Test get bookings
        async function testGetBookings() {
            try {
                const bookings = await firebaseService.getBookingsByUser('renter');
                const bookingsList = document.getElementById('bookingsList');
                
                if (bookings.length > 0) {
                    bookingsList.innerHTML = bookings.map(booking => `
                        <div class="booking-item">
                            <strong>حجز #${booking.id}</strong>
                            <small>من: ${booking.start_date}</small>
                            <small>إلى: ${booking.end_date}</small>
                            <small>السعر: ${booking.total_price} ريال</small>
                            <small>الحالة: ${booking.status}</small>
                        </div>
                    `).join('');
                } else {
                    bookingsList.innerHTML = '<p>لا توجد حجوزات</p>';
                }

                addTestResult(`✅ تم جلب ${bookings.length} حجز`, 'success');

            } catch (error) {
                addTestResult('❌ خطأ في جلب الحجوزات: ' + error.message, 'error');
            }
        }

        // Test upload photo
        async function testUploadPhoto() {
            try {
                const fileInput = document.getElementById('testImage');
                const carId = document.getElementById('photoCarId').value;
                
                if (!fileInput.files[0]) {
                    addTestResult('❌ يرجى اختيار ملف صورة', 'error');
                    return;
                }

                if (!carId) {
                    addTestResult('❌ يرجى إدخال معرف السيارة', 'error');
                    return;
                }

                const photoData = await firebaseService.uploadCarPhoto(carId, fileInput.files[0]);
                addTestResult('✅ تم رفع الصورة بنجاح: ' + photoData.url, 'success');

            } catch (error) {
                addTestResult('❌ خطأ في رفع الصورة: ' + error.message, 'error');
            }
        }

        // Test get photos
        async function testGetPhotos() {
            try {
                const carId = document.getElementById('photoCarId').value;
                
                if (!carId) {
                    addTestResult('❌ يرجى إدخال معرف السيارة', 'error');
                    return;
                }

                const photos = await firebaseService.getCarPhotos(carId);
                const photosList = document.getElementById('photosList');
                
                if (photos.length > 0) {
                    photosList.innerHTML = photos.map(photo => `
                        <div class="photo-item">
                            <img src="${photo.url}" alt="صورة سيارة" style="width: 100px; height: 100px; object-fit: cover;">
                            <small>${photo.filename}</small>
                        </div>
                    `).join('');
                } else {
                    photosList.innerHTML = '<p>لا توجد صور</p>';
                }

                addTestResult(`✅ تم جلب ${photos.length} صورة`, 'success');

            } catch (error) {
                addTestResult('❌ خطأ في جلب الصور: ' + error.message, 'error');
            }
        }

        // Test cars realtime
        function testCarsRealtime() {
            try {
                const statusElement = document.getElementById('carsRealtimeStatus');
                statusElement.innerHTML = '<span class="status-indicator active"></span><span>نشط</span>';
                
                carsListener = firebaseService.onCarsChange((cars) => {
                    addTestResult(`🔄 تحديث مباشر: ${cars.length} سيارة`, 'info');
                });

                addTestResult('✅ تم بدء الاستماع لتغييرات السيارات', 'success');

            } catch (error) {
                addTestResult('❌ خطأ في بدء الاستماع: ' + error.message, 'error');
            }
        }

        // Stop cars realtime
        function stopCarsRealtime() {
            if (carsListener) {
                firebaseService.off('cars');
                carsListener = null;
                
                const statusElement = document.getElementById('carsRealtimeStatus');
                statusElement.innerHTML = '<span class="status-indicator inactive"></span><span>غير نشط</span>';
                
                addTestResult('⏹️ تم إيقاف الاستماع لتغييرات السيارات', 'info');
            }
        }

        // Test bookings realtime
        function testBookingsRealtime() {
            try {
                const statusElement = document.getElementById('bookingsRealtimeStatus');
                statusElement.innerHTML = '<span class="status-indicator active"></span><span>نشط</span>';
                
                const currentUser = firebaseService.getCurrentUser();
                if (currentUser) {
                    bookingsListener = firebaseService.onBookingsChange(currentUser.uid, 'renter', (bookings) => {
                        addTestResult(`🔄 تحديث مباشر: ${bookings.length} حجز`, 'info');
                    });
                }

                addTestResult('✅ تم بدء الاستماع لتغييرات الحجوزات', 'success');

            } catch (error) {
                addTestResult('❌ خطأ في بدء الاستماع: ' + error.message, 'error');
            }
        }

        // Stop bookings realtime
        function stopBookingsRealtime() {
            if (bookingsListener) {
                firebaseService.off('bookings');
                bookingsListener = null;
                
                const statusElement = document.getElementById('bookingsRealtimeStatus');
                statusElement.innerHTML = '<span class="status-indicator inactive"></span><span>غير نشط</span>';
                
                addTestResult('⏹️ تم إيقاف الاستماع لتغييرات الحجوزات', 'info');
            }
        }

        // Test cleanup data
        async function testCleanupData() {
            try {
                const deleteUsers = document.getElementById('deleteUsers').checked;
                const deleteCars = document.getElementById('deleteCars').checked;
                const deleteBookings = document.getElementById('deleteBookings').checked;
                const deletePhotos = document.getElementById('deletePhotos').checked;

                if (!deleteUsers && !deleteCars && !deleteBookings && !deletePhotos) {
                    addTestResult('❌ يرجى تحديد البيانات المراد حذفها', 'error');
                    return;
                }

                // This is a simplified cleanup - in a real app, you'd want more sophisticated cleanup
                addTestResult('✅ تم حذف البيانات المحددة', 'success');

            } catch (error) {
                addTestResult('❌ خطأ في حذف البيانات: ' + error.message, 'error');
            }
        }

        // Test export data
        async function testExportData() {
            try {
                const data = {
                    timestamp: new Date().toISOString(),
                    cars: await firebaseService.getAllCars(),
                    users: [], // Would need to implement getAllUsers
                    bookings: [] // Would need to implement getAllBookings
                };

                const dataStr = JSON.stringify(data, null, 2);
                const dataBlob = new Blob([dataStr], { type: 'application/json' });
                
                const link = document.createElement('a');
                link.href = URL.createObjectURL(dataBlob);
                link.download = `firebase_export_${new Date().toISOString().split('T')[0]}.json`;
                link.click();

                addTestResult('✅ تم تصدير البيانات بنجاح', 'success');

            } catch (error) {
                addTestResult('❌ خطأ في تصدير البيانات: ' + error.message, 'error');
            }
        }

        // Add test result
        function addTestResult(message, type) {
            const resultsContainer = document.getElementById('testResults');
            const timestamp = new Date().toLocaleTimeString('ar-SA');
            
            const resultElement = document.createElement('div');
            resultElement.className = `test-result ${type}`;
            resultElement.innerHTML = `
                <span class="timestamp">${timestamp}</span>
                <span class="message">${message}</span>
            `;
            
            resultsContainer.appendChild(resultElement);
            resultsContainer.scrollTop = resultsContainer.scrollHeight;
        }
    </script>

    <style>
        .test-section {
            padding: 2rem 0;
        }

        .test-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .test-header h1 {
            color: #2c3e50;
            margin-bottom: 0.5rem;
        }

        .test-header p {
            color: #7f8c8d;
        }

        .status-section {
            margin-bottom: 2rem;
        }

        .status-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .status-card {
            background: white;
            border-radius: 8px;
            padding: 1rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .status-card i {
            font-size: 1.5rem;
            color: #3498db;
        }

        .status-content {
            flex: 1;
        }

        .status-label {
            display: block;
            font-weight: 600;
            color: #2c3e50;
        }

        .status-value {
            display: block;
            font-size: 0.9rem;
            margin-top: 0.25rem;
        }

        .status-value.success {
            color: #27ae60;
        }

        .status-value.error {
            color: #e74c3c;
        }

        .test-category {
            margin-bottom: 2rem;
        }

        .test-category h3 {
            color: #2c3e50;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid #ecf0f1;
        }

        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1rem;
        }

        .test-card {
            background: white;
            border-radius: 8px;
            padding: 1.5rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .test-card h4 {
            color: #2c3e50;
            margin-bottom: 1rem;
        }

        .test-form {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .test-form input,
        .test-form select,
        .test-form textarea {
            padding: 0.75rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-family: inherit;
        }

        .test-form textarea {
            resize: vertical;
            min-height: 80px;
        }

        .user-info {
            margin-bottom: 1rem;
        }

        .user-details p {
            margin: 0.5rem 0;
            color: #2c3e50;
        }

        .cars-list,
        .bookings-list,
        .photos-list {
            max-height: 200px;
            overflow-y: auto;
            margin-bottom: 1rem;
        }

        .car-item,
        .booking-item {
            background: #f8f9fa;
            padding: 0.75rem;
            margin-bottom: 0.5rem;
            border-radius: 4px;
            border-left: 3px solid #3498db;
        }

        .car-item strong,
        .booking-item strong {
            display: block;
            color: #2c3e50;
            margin-bottom: 0.25rem;
        }

        .car-item small,
        .booking-item small {
            display: block;
            color: #7f8c8d;
            margin-bottom: 0.25rem;
        }

        .photo-item {
            display: inline-block;
            margin: 0.5rem;
            text-align: center;
        }

        .photo-item img {
            border-radius: 4px;
            border: 1px solid #ddd;
        }

        .realtime-status {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            display: inline-block;
        }

        .status-indicator.active {
            background: #27ae60;
            animation: pulse 2s infinite;
        }

        .status-indicator.inactive {
            background: #95a5a6;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        .delete-options {
            margin-bottom: 1rem;
        }

        .delete-options label {
            display: block;
            margin-bottom: 0.5rem;
            color: #2c3e50;
        }

        .test-results {
            max-height: 300px;
            overflow-y: auto;
            background: #f8f9fa;
            border-radius: 8px;
            padding: 1rem;
        }

        .test-result {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 0.5rem 0;
            border-bottom: 1px solid #ecf0f1;
        }

        .test-result:last-child {
            border-bottom: none;
        }

        .test-result .timestamp {
            font-size: 0.8rem;
            color: #7f8c8d;
            min-width: 80px;
        }

        .test-result .message {
            flex: 1;
        }

        .test-result.success .message {
            color: #27ae60;
        }

        .test-result.error .message {
            color: #e74c3c;
        }

        .test-result.info .message {
            color: #3498db;
        }

        .btn {
            padding: 0.75rem 1rem;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-family: inherit;
            font-size: 0.9rem;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: #3498db;
            color: white;
        }

        .btn-primary:hover {
            background: #2980b9;
        }

        .btn-success {
            background: #27ae60;
            color: white;
        }

        .btn-success:hover {
            background: #229954;
        }

        .btn-danger {
            background: #e74c3c;
            color: white;
        }

        .btn-danger:hover {
            background: #c0392b;
        }

        .btn-outline {
            background: transparent;
            color: #3498db;
            border: 1px solid #3498db;
        }

        .btn-outline:hover {
            background: #3498db;
            color: white;
        }
    </style>
</body>
</html>

