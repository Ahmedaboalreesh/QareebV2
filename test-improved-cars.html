<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุงุฎุชุจุงุฑ ุชุญุณููุงุช ุนุฑุถ ุงูุณูุงุฑุงุช</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .test-section {
            margin-top: 80px;
            padding: 40px 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: calc(100vh - 80px);
        }
        
        .test-container {
            background: white;
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }
        
        .test-header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }
        
        .test-header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 10px;
        }
        
        .btn-group {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            text-decoration: none;
            display: inline-block;
            text-align: center;
            transition: all 0.3s ease;
        }
        
        .btn-primary {
            background: #667eea;
            color: white;
        }
        
        .btn-outline {
            background: transparent;
            color: #667eea;
            border: 2px solid #667eea;
        }
        
        .btn-success {
            background: #28a745;
            color: white;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        
        .info-box {
            background: #e3f2fd;
            border: 1px solid #2196f3;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
        }
        
        .info-box h4 {
            color: #1976d2;
            margin-bottom: 10px;
        }
        
        .info-box ul {
            text-align: right;
            margin: 0;
            padding-right: 20px;
        }
        
        .info-box li {
            margin-bottom: 5px;
            color: #666;
        }
        
        .demo-cars {
            margin-top: 20px;
        }
        
        .demo-cars h3 {
            margin-bottom: 20px;
            color: #2c3e50;
            text-align: center;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <nav class="navbar">
            <div class="nav-container">
                <div class="nav-logo">
                    <a href="index.html">
                        <i class="fas fa-car"></i>
                        <span>ููุตุฉ ุชุฃุฌูุฑ ุงูุณูุงุฑุงุช</span>
                    </a>
                </div>
                <ul class="nav-menu">
                    <li class="nav-item">
                        <a href="index.html" class="nav-link">ุงูุฑุฆูุณูุฉ</a>
                    </li>
                    <li class="nav-item">
                        <a href="browse-cars.html" class="nav-link">ุชุตูุญ ุงูุณูุงุฑุงุช</a>
                    </li>
                    <li class="nav-item">
                        <a href="add-car.html" class="nav-link">ุฅุถุงูุฉ ุณูุงุฑุฉ</a>
                    </li>
                </ul>
            </div>
        </nav>
    </header>

    <!-- Test Section -->
    <section class="test-section">
        <div class="container">
            <div class="test-header">
                <h1>ุงุฎุชุจุงุฑ ุชุญุณููุงุช ุนุฑุถ ุงูุณูุงุฑุงุช</h1>
                <p>ุชุญุณูู ุชุตููู ูุนุฑุถ ูุนูููุงุช ุงูุณูุงุฑุงุช ูู ุตูุญุฉ ุงูุชุตูุญ</p>
            </div>

            <div class="test-container">
                <h2>ุงูุชุญุณููุงุช ุงููุถุงูุฉ</h2>
                <div class="info-box">
                    <h4>ุชุญุณููุงุช ุงูุชุตููู ูุงููุงุฌูุฉ:</h4>
                    <ul>
                        <li>โ ุชุตููู ุจุทุงูุงุช ุฃูุซุฑ ุฌุงุฐุจูุฉ ูุนุตุฑูุฉ</li>
                        <li>โ ุนุฑุถ ูุนูููุงุช ุงูุณูุงุฑุฉ ุจุดูู ููุธู ููุงุถุญ</li>
                        <li>โ ุฅุถุงูุฉ ุดุงุฑุฉ ุงูุฎุตู ููุณูุงุฑุงุช ุงููุฎูุถุฉ</li>
                        <li>โ ุชุญุณูู ุนุฑุถ ุงูุชููููุงุช ูุงููุฌูู</li>
                        <li>โ ุนุฑุถ ุงููููุฒุงุช ูุนูุงูุงุช ููููุฉ</li>
                        <li>โ ุฅุถุงูุฉ ุฒุฑ ุงูููุถูุฉ ููู ุณูุงุฑุฉ</li>
                        <li>โ ุชุญุณูู ุนุฑุถ ุงูุณุนุฑ ูุงูุฎุตููุงุช</li>
                        <li>โ ุชุตููู ูุชุฌุงูุจ ููุฌูุงู ูุงูุฃุฌูุฒุฉ ุงูููุญูุฉ</li>
                    </ul>
                </div>
            </div>

            <div class="test-container">
                <h2>ุงุฎุชุจุงุฑ ุงูุชุญุณููุงุช</h2>
                <div class="btn-group">
                    <button class="btn btn-primary" onclick="testBrowseCars()">
                        <i class="fas fa-eye"></i>
                        ุงุฎุชุจุงุฑ ุตูุญุฉ ุชุตูุญ ุงูุณูุงุฑุงุช
                    </button>
                    <button class="btn btn-success" onclick="addSampleCars()">
                        <i class="fas fa-plus"></i>
                        ุฅุถุงูุฉ ุณูุงุฑุงุช ุชุฌุฑูุจูุฉ
                    </button>
                    <button class="btn btn-outline" onclick="testFeatures()">
                        <i class="fas fa-star"></i>
                        ุงุฎุชุจุงุฑ ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ
                    </button>
                </div>
                
                <div class="info-box">
                    <h4>ููููุฉ ุงุฎุชุจุงุฑ ุงูุชุญุณููุงุช:</h4>
                    <ul>
                        <li>1. ุงุถุบุท ุนูู "ุฅุถุงูุฉ ุณูุงุฑุงุช ุชุฌุฑูุจูุฉ" ูุฅูุดุงุก ุจูุงูุงุช</li>
                        <li>2. ุงุถุบุท ุนูู "ุงุฎุชุจุงุฑ ุตูุญุฉ ุชุตูุญ ุงูุณูุงุฑุงุช" ููุชุญ ุงูุตูุญุฉ</li>
                        <li>3. ูุงุญุธ ุงูุชุตููู ุงูุฌุฏูุฏ ููุจุทุงูุงุช</li>
                        <li>4. ุงุฎุชุจุฑ ุฃุฒุฑุงุฑ ุงูููุถูุฉ ูุงูุชูุงุนู</li>
                        <li>5. ุชุญูู ูู ุนุฑุถ ุงููููุฒุงุช ูุงูุฎุตููุงุช</li>
                        <li>6. ุงุฎุชุจุฑ ุงูุชุตููู ุงููุชุฌุงูุจ ุนูู ุงูุฌูุงู</li>
                    </ul>
                </div>
            </div>

            <div class="test-container">
                <h2>ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ</h2>
                <div class="info-box">
                    <h4>ูุนูููุงุช ุฅุถุงููุฉ ููุณูุงุฑุงุช:</h4>
                    <ul>
                        <li>๐ **ูุนูููุงุช ุงูุณูุงุฑุฉ**: ุงููุงุฑูุฉุ ุงูููุฏููุ ุณูุฉ ุงูุตูุน</li>
                        <li>๐ **ุงููููุน**: ุนุฑุถ ูุงุถุญ ููููุน ุงูุณูุงุฑุฉ</li>
                        <li>โ๏ธ **ุงูููุงุตูุงุช**: ูุงูู ุงูุญุฑูุฉุ ููุน ุงููููุฏุ ุงููุณุงูุฉ ุงูููุทูุนุฉ</li>
                        <li>โญ **ุงููููุฒุงุช**: ุนุฑุถ ุงููููุฒุงุช ูุนูุงูุงุช ููููุฉ</li>
                        <li>๐ฐ **ุงูุฃุณุนุงุฑ**: ุนุฑุถ ุงูุณุนุฑ ุงูุญุงูู ูุงูุฎุตููุงุช</li>
                        <li>โค๏ธ **ุงูููุถูุฉ**: ุฅุถุงูุฉ ูุฅุฒุงูุฉ ูู ุงูููุถูุฉ</li>
                        <li>๐ฑ **ุงูุชุตููู ุงููุชุฌุงูุจ**: ุนุฑุถ ูุซุงูู ุนูู ุฌููุน ุงูุฃุฌูุฒุฉ</li>
                    </ul>
                </div>
            </div>

            <div class="test-container">
                <h2>ูุซุงู ุนูู ุงูุจุทุงูุงุช ุงููุญุณูุฉ</h2>
                <div class="demo-cars">
                    <h3>ุณูุงุฑุงุช ุชุฌุฑูุจูุฉ ูุน ุงูุชุญุณููุงุช ุงูุฌุฏูุฏุฉ</h3>
                    <div class="cars-grid" id="demoCarsGrid">
                        <!-- ุณูุชู ุฅุถุงูุฉ ุงูุจุทุงูุงุช ููุง -->
                    </div>
                </div>
            </div>
        </div>
    </section>

    <script>
        // Sample cars data for demo
        const demoCars = [
            {
                id: 1,
                brand: 'ุชูููุชุง',
                model: 'ูุงูุฑู',
                year: '2023',
                daily_rate: 150,
                original_price: 180,
                location: 'ุงูุฑูุงุถ',
                transmission: 'ุฃูุชููุงุชูู',
                fuel_type: 'ุจูุฒูู',
                mileage: 25000,
                rating: 4.8,
                photos: ['car1.jpg'],
                features: ['ac', 'bluetooth', 'gps', 'backup_camera'],
                status: 'active'
            },
            {
                id: 2,
                brand: 'ูุฑุณูุฏุณ',
                model: 'C-Class',
                year: '2023',
                daily_rate: 300,
                location: 'ุฌุฏุฉ',
                transmission: 'ุฃูุชููุงุชูู',
                fuel_type: 'ุจูุฒูู',
                mileage: 15000,
                rating: 4.9,
                photos: ['car2.jpg'],
                features: ['ac', 'bluetooth', 'gps', 'leather_seats', 'sunroof'],
                status: 'active'
            },
            {
                id: 3,
                brand: 'ููููุฏุงู',
                model: 'ุณููุงุชุง',
                year: '2022',
                daily_rate: 120,
                location: 'ุงูุฏูุงู',
                transmission: 'ุฃูุชููุงุชูู',
                fuel_type: 'ุจูุฒูู',
                mileage: 30000,
                rating: 4.6,
                photos: ['car3.jpg'],
                features: ['ac', 'bluetooth', 'cruise_control'],
                status: 'active'
            }
        ];

        // Feature names mapping
        const featureNames = {
            'ac': 'ูููู ููุงุก',
            'bluetooth': 'ุจููุชูุซ',
            'gps': 'ูุธุงู ููุงุญุฉ',
            'backup_camera': 'ูุงููุฑุง ุฎูููุฉ',
            'cruise_control': 'ุชุญูู ูู ุงูุณุฑุนุฉ',
            'leather_seats': 'ููุงุนุฏ ุฌูุฏูุฉ',
            'sunroof': 'ุณูู ูุงุจู ูููุชุญ',
            'child_seat': 'ููุนุฏ ุฃุทูุงู'
        };

        // Generate star rating HTML
        function generateStarRating(rating) {
            const fullStars = Math.floor(rating);
            const hasHalfStar = rating % 1 >= 0.5;
            const emptyStars = 5 - fullStars - (hasHalfStar ? 1 : 0);
            
            let starsHTML = '';
            
            // Full stars
            for (let i = 0; i < fullStars; i++) {
                starsHTML += '<i class="fas fa-star text-warning"></i>';
            }
            
            // Half star
            if (hasHalfStar) {
                starsHTML += '<i class="fas fa-star-half-alt text-warning"></i>';
            }
            
            // Empty stars
            for (let i = 0; i < emptyStars; i++) {
                starsHTML += '<i class="far fa-star text-warning"></i>';
            }
            
            return starsHTML;
        }

        // Create demo car card
        function createDemoCarCard(car) {
            const card = document.createElement('div');
            card.className = 'car-card';
            
            // Get the first photo from the car's photos array
            let imageSrc = "https://via.placeholder.com/300x200/007bff/ffffff?text=${car.brand}+${car.model}";
            let imageAlt = `${car.brand} ${car.model}`;
            
            // Format features for display
            const featuresList = car.features ? car.features.slice(0, 4).map(f => featureNames[f] || f) : [];
            
            // Format mileage
            const mileage = car.mileage ? car.mileage.toLocaleString() : 'ุบูุฑ ูุญุฏุฏ';
            
            // Get fuel type
            const fuelType = car.fuel_type || 'ุบูุฑ ูุญุฏุฏ';
            
            // Calculate discount if available
            const originalPrice = car.original_price || car.daily_rate;
            const currentPrice = car.daily_rate;
            const hasDiscount = originalPrice > currentPrice;
            const discountPercentage = hasDiscount ? Math.round(((originalPrice - currentPrice) / originalPrice) * 100) : 0;
            
            card.innerHTML = `
                <div class="car-card-header">
                    <div class="car-image">
                        <img src="${imageSrc}" alt="${imageAlt}" onerror="this.src='https://via.placeholder.com/300x200/007bff/ffffff?text=${car.brand}+${car.model}'">
                        ${hasDiscount ? `<div class="discount-badge">-${discountPercentage}%</div>` : ''}
                        <div class="car-rating">
                            <div class="rating-stars">
                                ${generateStarRating(car.rating || 4.5)}
                            </div>
                            <span class="rating-score">${car.rating || '4.5'}</span>
                        </div>
                    </div>
                </div>
                
                <div class="car-info">
                    <div class="car-header">
                        <h3 class="car-title">${car.brand} ${car.model}</h3>
                        <span class="car-year">${car.year}</span>
                    </div>
                    
                    <div class="car-location">
                        <i class="fas fa-map-marker-alt"></i>
                        <span>${car.location}</span>
                    </div>
                    
                    <div class="car-specs">
                        <div class="spec-item">
                            <i class="fas fa-cog"></i>
                            <span>${car.transmission || 'ุบูุฑ ูุญุฏุฏ'}</span>
                        </div>
                        <div class="spec-item">
                            <i class="fas fa-gas-pump"></i>
                            <span>${fuelType}</span>
                        </div>
                        <div class="spec-item">
                            <i class="fas fa-road"></i>
                            <span>${mileage} ูู</span>
                        </div>
                    </div>
                    
                    <div class="car-features">
                        <div class="features-title">
                            <i class="fas fa-star"></i>
                            <span>ุงููููุฒุงุช</span>
                        </div>
                        <div class="features-list">
                            ${featuresList.map(feature => `
                                <span class="feature-tag">
                                    <i class="fas fa-check"></i>
                                    ${feature}
                                </span>
                            `).join('')}
                        </div>
                    </div>
                    
                    <div class="car-price-section">
                        <div class="price-info">
                            ${hasDiscount ? `
                                <div class="original-price">${originalPrice} ุฑูุงู</div>
                            ` : ''}
                            <div class="current-price">
                                <span class="price-amount">${currentPrice}</span>
                                <span class="price-currency">ุฑูุงู/ููู</span>
                            </div>
                        </div>
                        <div class="car-actions">
                            <button class="btn btn-primary btn-book" onclick="viewCarDetails(${car.id})">
                                <i class="fas fa-eye"></i>
                                ุนุฑุถ ุงูุชูุงุตูู
                            </button>
                            <button class="btn btn-outline btn-favorite" onclick="toggleFavorite(${car.id})" title="ุฅุถุงูุฉ ููููุถูุฉ">
                                <i class="far fa-heart"></i>
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            return card;
        }

        // Display demo cars
        function displayDemoCars() {
            const demoCarsGrid = document.getElementById('demoCarsGrid');
            demoCarsGrid.innerHTML = '';
            
            demoCars.forEach(car => {
                const carCard = createDemoCarCard(car);
                demoCarsGrid.appendChild(carCard);
            });
        }

        function testBrowseCars() {
            // ุฅูุดุงุก ูุณุชุฎุฏู ุชุฌุฑูุจู ุฅุฐุง ูู ููู ููุฌูุฏุงู
            if (!localStorage.getItem('userData')) {
                const testUser = {
                    id: 1,
                    name: 'ุฃุญูุฏ ูุญูุฏ',
                    email: 'ahmed@test.com',
                    phone: '+966501234567'
                };
                localStorage.setItem('userData', JSON.stringify(testUser));
                localStorage.setItem('userToken', 'test-token');
                localStorage.setItem('userType', 'renter');
            }
            
            // ูุชุญ ุตูุญุฉ ุชุตูุญ ุงูุณูุงุฑุงุช
            window.open('browse-cars.html', '_blank');
        }

        function addSampleCars() {
            // Get existing cars
            const existingCars = JSON.parse(localStorage.getItem('mockCars') || '[]');
            
            // Add demo cars with improved data
            const improvedCars = [
                {
                    id: Date.now() + 1,
                    brand: 'ุชูููุชุง',
                    model: 'ูุงูุฑู',
                    year: '2023',
                    daily_rate: 150,
                    original_price: 180,
                    location: 'ุงูุฑูุงุถ',
                    transmission: 'ุฃูุชููุงุชูู',
                    fuel_type: 'ุจูุฒูู',
                    mileage: 25000,
                    rating: 4.8,
                    photos: ['car1.jpg'],
                    features: ['ac', 'bluetooth', 'gps', 'backup_camera'],
                    status: 'active'
                },
                {
                    id: Date.now() + 2,
                    brand: 'ูุฑุณูุฏุณ',
                    model: 'C-Class',
                    year: '2023',
                    daily_rate: 300,
                    location: 'ุฌุฏุฉ',
                    transmission: 'ุฃูุชููุงุชูู',
                    fuel_type: 'ุจูุฒูู',
                    mileage: 15000,
                    rating: 4.9,
                    photos: ['car2.jpg'],
                    features: ['ac', 'bluetooth', 'gps', 'leather_seats', 'sunroof'],
                    status: 'active'
                },
                {
                    id: Date.now() + 3,
                    brand: 'ููููุฏุงู',
                    model: 'ุณููุงุชุง',
                    year: '2022',
                    daily_rate: 120,
                    location: 'ุงูุฏูุงู',
                    transmission: 'ุฃูุชููุงุชูู',
                    fuel_type: 'ุจูุฒูู',
                    mileage: 30000,
                    rating: 4.6,
                    photos: ['car3.jpg'],
                    features: ['ac', 'bluetooth', 'cruise_control'],
                    status: 'active'
                },
                {
                    id: Date.now() + 4,
                    brand: 'ููุฒุณ',
                    model: 'ES',
                    year: '2023',
                    daily_rate: 400,
                    original_price: 450,
                    location: 'ุงูุฑูุงุถ',
                    transmission: 'ุฃูุชููุงุชูู',
                    fuel_type: 'ุจูุฒูู',
                    mileage: 12000,
                    rating: 4.9,
                    photos: ['car4.jpg'],
                    features: ['ac', 'bluetooth', 'gps', 'leather_seats', 'sunroof', 'backup_camera'],
                    status: 'active'
                }
            ];
            
            // Combine existing and new cars
            const allCars = [...existingCars, ...improvedCars];
            localStorage.setItem('mockCars', JSON.stringify(allCars));
            
            alert('ุชู ุฅุถุงูุฉ ุณูุงุฑุงุช ุชุฌุฑูุจูุฉ ูุญุณูุฉ ุจูุฌุงุญ! ููููู ุงูุขู ุงุฎุชุจุงุฑ ุตูุญุฉ ุชุตูุญ ุงูุณูุงุฑุงุช');
        }

        function testFeatures() {
            alert('ุงุฎุชุจุงุฑ ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ:\n\n1. ุชุตููู ุจุทุงูุงุช ุฃูุซุฑ ุฌุงุฐุจูุฉ\n2. ุนุฑุถ ุงููููุฒุงุช ูุนูุงูุงุช ููููุฉ\n3. ุดุงุฑุฉ ุงูุฎุตู ููุณูุงุฑุงุช ุงููุฎูุถุฉ\n4. ุฒุฑ ุงูููุถูุฉ ููู ุณูุงุฑุฉ\n5. ุนุฑุถ ููุธู ููููุงุตูุงุช\n6. ุชุตููู ูุชุฌุงูุจ ููุฌูุงู');
        }

        // Toggle favorite function
        function toggleFavorite(carId) {
            try {
                const favorites = JSON.parse(localStorage.getItem('favorites') || '[]');
                const isFavorite = favorites.includes(carId);
                
                if (isFavorite) {
                    // Remove from favorites
                    const updatedFavorites = favorites.filter(id => id !== carId);
                    localStorage.setItem('favorites', JSON.stringify(updatedFavorites));
                    alert('ุชู ุฅุฒุงูุฉ ุงูุณูุงุฑุฉ ูู ุงูููุถูุฉ');
                } else {
                    // Add to favorites
                    favorites.push(carId);
                    localStorage.setItem('favorites', JSON.stringify(favorites));
                    alert('ุชู ุฅุถุงูุฉ ุงูุณูุงุฑุฉ ููููุถูุฉ');
                }
                
                // Update button appearance
                updateFavoriteButton(carId, !isFavorite);
                
            } catch (error) {
                console.error('Error toggling favorite:', error);
                alert('ุญุฏุซ ุฎุทุฃ ูู ุชุญุฏูุซ ุงูููุถูุฉ');
            }
        }

        // Update favorite button appearance
        function updateFavoriteButton(carId, isFavorite) {
            const button = document.querySelector(`[onclick="toggleFavorite(${carId})"]`);
            if (button) {
                const icon = button.querySelector('i');
                if (isFavorite) {
                    icon.className = 'fas fa-heart';
                    button.style.color = '#e74c3c';
                } else {
                    icon.className = 'far fa-heart';
                    button.style.color = '#6c757d';
                }
            }
        }

        // View car details function
        function viewCarDetails(carId) {
            alert(`ุนุฑุถ ุชูุงุตูู ุงูุณูุงุฑุฉ ุฑูู ${carId}\n\nูุฐู ุงูููุฒุฉ ุณุชูุชุญ ุตูุญุฉ ุชูุงุตูู ุงูุณูุงุฑุฉ ูู ุงูุชุทุจูู ุงููุนูู.`);
        }

        // Display demo cars when page loads
        document.addEventListener('DOMContentLoaded', function() {
            displayDemoCars();
        });
    </script>
</body>
</html>
