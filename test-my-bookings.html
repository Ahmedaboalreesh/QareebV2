<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ø®ØªØ¨Ø§Ø± ØµÙØ­Ø© Ø­Ø¬ÙˆØ²Ø§ØªÙŠ</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .test-section {
            margin-top: 80px;
            padding: 40px 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: calc(100vh - 80px);
        }
        
        .test-container {
            background: white;
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }
        
        .test-header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }
        
        .test-header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 10px;
        }
        
        .btn-group {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            text-decoration: none;
            display: inline-block;
            text-align: center;
            transition: all 0.3s ease;
        }
        
        .btn-primary {
            background: #667eea;
            color: white;
        }
        
        .btn-outline {
            background: transparent;
            color: #667eea;
            border: 2px solid #667eea;
        }
        
        .btn-success {
            background: #28a745;
            color: white;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        
        .info-box {
            background: #e3f2fd;
            border: 1px solid #2196f3;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
        }
        
        .info-box h4 {
            color: #1976d2;
            margin-bottom: 10px;
        }
        
        .info-box ul {
            text-align: right;
            margin: 0;
            padding-right: 20px;
        }
        
        .info-box li {
            margin-bottom: 5px;
            color: #666;
        }
        
        .data-preview {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
            font-family: monospace;
            font-size: 0.9rem;
            max-height: 300px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <nav class="navbar">
            <div class="nav-container">
                <div class="nav-logo">
                    <a href="index.html">
                        <i class="fas fa-car"></i>
                        <span>Ù…Ù†ØµØ© ØªØ£Ø¬ÙŠØ± Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª</span>
                    </a>
                </div>
                <ul class="nav-menu">
                    <li class="nav-item">
                        <a href="index.html" class="nav-link">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
                    </li>
                    <li class="nav-item">
                        <a href="browse-cars.html" class="nav-link">ØªØµÙØ­ Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª</a>
                    </li>
                    <li class="nav-item">
                        <a href="add-car.html" class="nav-link">Ø¥Ø¶Ø§ÙØ© Ø³ÙŠØ§Ø±Ø©</a>
                    </li>
                </ul>
            </div>
        </nav>
    </header>

    <!-- Test Section -->
    <section class="test-section">
        <div class="container">
            <div class="test-header">
                <h1>Ø§Ø®ØªØ¨Ø§Ø± ØµÙØ­Ø© Ø­Ø¬ÙˆØ²Ø§ØªÙŠ</h1>
                <p>Ø¥ØµÙ„Ø§Ø­ Ù…Ø´ÙƒÙ„Ø© "undefined" ÙˆØ¹Ø±Ø¶ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØµØ­ÙŠØ­Ø©</p>
            </div>

            <div class="test-container">
                <h2>Ø§Ù„Ù…Ø´ÙƒÙ„Ø© Ø§Ù„Ù…ØµÙ„Ø­Ø©</h2>
                <div class="info-box">
                    <h4>Ø§Ù„Ù…Ø´ÙƒÙ„Ø© Ø§Ù„Ø£ØµÙ„ÙŠØ©:</h4>
                    <ul>
                        <li>âŒ Ø¸Ù‡ÙˆØ± "undefined" Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØµØ­ÙŠØ­Ø©</li>
                        <li>âŒ Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Ø¨ÙŠØ§Ù†Ø§Øª ÙƒØ§ÙÙŠØ© Ù„Ù„Ø­Ø¬ÙˆØ²Ø§Øª</li>
                        <li>âŒ Ø¹Ø¯Ù… Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙØ§Ø±ØºØ©</li>
                        <li>âŒ Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù…Ø§Ù„Ùƒ Ø§Ù„Ø³ÙŠØ§Ø±Ø©</li>
                    </ul>
                </div>
            </div>

            <div class="test-container">
                <h2>Ø§Ù„Ø­Ù„ Ø§Ù„Ù…Ø·Ø¨Ù‚</h2>
                <div class="info-box">
                    <h4>Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª Ø§Ù„Ù…Ø·Ø¨Ù‚Ø©:</h4>
                    <ul>
                        <li>âœ… Ø¥Ø¶Ø§ÙØ© Ø¨ÙŠØ§Ù†Ø§Øª Ø´Ø§Ù…Ù„Ø© Ù„Ù„Ø­Ø¬ÙˆØ²Ø§Øª</li>
                        <li>âœ… Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ø§Ù„Ø¢Ù…Ù† Ù…Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙØ§Ø±ØºØ©</li>
                        <li>âœ… Ø¥Ø¶Ø§ÙØ© Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù…Ø§Ù„Ùƒ Ø§Ù„Ø³ÙŠØ§Ø±Ø©</li>
                        <li>âœ… ØªØ­Ø³ÙŠÙ† Ø¹Ø±Ø¶ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø­Ø¬Ø²</li>
                        <li>âœ… Ø¥Ø¶Ø§ÙØ© fallbacks Ù„Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙÙ‚ÙˆØ¯Ø©</li>
                        <li>âœ… ØªØµÙÙŠØ© Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª Ø­Ø³Ø¨ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ</li>
                    </ul>
                </div>
            </div>

            <div class="test-container">
                <h2>Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø­Ù„</h2>
                <div class="btn-group">
                    <button class="btn btn-primary" onclick="testMyBookings()">
                        <i class="fas fa-eye"></i>
                        Ø§Ø®ØªØ¨Ø§Ø± ØµÙØ­Ø© Ø­Ø¬ÙˆØ²Ø§ØªÙŠ
                    </button>
                    <button class="btn btn-success" onclick="addSampleBookings()">
                        <i class="fas fa-plus"></i>
                        Ø¥Ø¶Ø§ÙØ© Ø­Ø¬ÙˆØ²Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ©
                    </button>
                    <button class="btn btn-outline" onclick="clearBookings()">
                        <i class="fas fa-trash"></i>
                        Ù…Ø³Ø­ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª
                    </button>
                    <button class="btn btn-outline" onclick="showCurrentData()">
                        <i class="fas fa-database"></i>
                        Ø¹Ø±Ø¶ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©
                    </button>
                </div>
                
                <div class="info-box">
                    <h4>ÙƒÙŠÙÙŠØ© Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø­Ù„:</h4>
                    <ul>
                        <li>1. Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ "Ø¥Ø¶Ø§ÙØ© Ø­Ø¬ÙˆØ²Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ©" Ù„Ø¥Ù†Ø´Ø§Ø¡ Ø¨ÙŠØ§Ù†Ø§Øª</li>
                        <li>2. Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ "Ø§Ø®ØªØ¨Ø§Ø± ØµÙØ­Ø© Ø­Ø¬ÙˆØ²Ø§ØªÙŠ" Ù„ÙØªØ­ Ø§Ù„ØµÙØ­Ø©</li>
                        <li>3. ØªØ£ÙƒØ¯ Ù…Ù† Ø¹Ø¯Ù… Ø¸Ù‡ÙˆØ± "undefined"</li>
                        <li>4. ØªØ­Ù‚Ù‚ Ù…Ù† Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­</li>
                        <li>5. Ø§Ø®ØªØ¨Ø± Ø¹Ø±Ø¶ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø­Ø¬Ø²</li>
                        <li>6. Ø§Ø®ØªØ¨Ø± Ø§Ù„ØªØµÙÙŠØ© Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ù„Ø©</li>
                    </ul>
                </div>
            </div>

            <div class="test-container">
                <h2>Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©</h2>
                <div class="info-box">
                    <h4>Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© Ù„Ù„Ø­Ø¬ÙˆØ²Ø§Øª:</h4>
                    <ul>
                        <li>ğŸ“± **Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø³ÙŠØ§Ø±Ø©**: Ø§Ù„Ù…Ø§Ø±ÙƒØ©ØŒ Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„ØŒ Ø³Ù†Ø© Ø§Ù„ØµÙ†Ø¹</li>
                        <li>ğŸ‘¤ **Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø§Ù„Ùƒ**: Ø§Ù„Ø§Ø³Ù…ØŒ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</li>
                        <li>ğŸ“… **ØªÙˆØ§Ø±ÙŠØ® Ù…Ø­Ø³Ù†Ø©**: ØªÙ†Ø³ÙŠÙ‚ Ø¹Ø±Ø¨ÙŠ Ù„Ù„ØªÙˆØ§Ø±ÙŠØ®</li>
                        <li>ğŸ’° **Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù…Ø§Ù„ÙŠØ©**: Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ ÙˆØ§Ù„ÙˆØ¯ÙŠØ¹Ø©</li>
                        <li>ğŸ“ **Ù…ÙˆØ§Ù‚Ø¹ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù… ÙˆØ§Ù„Ø¥Ø±Ø¬Ø§Ø¹**: ØªÙØ§ØµÙŠÙ„ Ø¯Ù‚ÙŠÙ‚Ø©</li>
                        <li>ğŸ“ **Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ù…Ø³ØªØ£Ø¬Ø±**: Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©</li>
                    </ul>
                </div>
                
                <div class="data-preview" id="dataPreview">
                    <!-- Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø³ØªØ¸Ù‡Ø± Ù‡Ù†Ø§ -->
                </div>
            </div>
        </div>
    </section>

    <script>
        function testMyBookings() {
            // Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø³ØªØ®Ø¯Ù… ØªØ¬Ø±ÙŠØ¨ÙŠ Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù…ÙˆØ¬ÙˆØ¯Ø§Ù‹
            if (!localStorage.getItem('userData')) {
                const testUser = {
                    id: 1,
                    name: 'Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯',
                    email: 'ahmed@test.com',
                    phone: '+966501234567'
                };
                localStorage.setItem('userData', JSON.stringify(testUser));
                localStorage.setItem('userToken', 'test-token');
                localStorage.setItem('userType', 'renter');
            }
            
            // ÙØªØ­ ØµÙØ­Ø© Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª
            window.open('my-bookings.html', '_blank');
        }

        function addSampleBookings() {
            const currentUser = JSON.parse(localStorage.getItem('userData') || '{}');
            const currentUserId = currentUser.id || 1;
            
            const sampleBookings = [
                {
                    id: 1,
                    car_id: 1,
                    renter_id: currentUserId,
                    car_name: 'ØªÙˆÙŠÙˆØªØ§ ÙƒØ§Ù…Ø±ÙŠ 2023',
                    car_brand: 'ØªÙˆÙŠÙˆØªØ§',
                    car_model: 'ÙƒØ§Ù…Ø±ÙŠ',
                    car_year: '2023',
                    start_date: '2024-01-15',
                    end_date: '2024-01-18',
                    total_amount: 450,
                    deposit_amount: 500,
                    status: 'pending',
                    pickup_location: 'Ù…Ø·Ø§Ø± Ø§Ù„Ù…Ù„Ùƒ Ø®Ø§Ù„Ø¯ Ø§Ù„Ø¯ÙˆÙ„ÙŠ',
                    return_location: 'Ù…Ø·Ø§Ø± Ø§Ù„Ù…Ù„Ùƒ Ø®Ø§Ù„Ø¯ Ø§Ù„Ø¯ÙˆÙ„ÙŠ',
                    renter_notes: 'Ø£Ø­ØªØ§Ø¬ Ø³ÙŠØ§Ø±Ø© Ù„Ù„ØªÙ†Ù‚Ù„ ÙÙŠ Ø§Ù„Ø±ÙŠØ§Ø¶',
                    created_at: '2024-01-10T10:00:00Z',
                    owner_name: 'Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯',
                    owner_phone: '+966501234567'
                },
                {
                    id: 2,
                    car_id: 3,
                    renter_id: currentUserId,
                    car_name: 'Ù…Ø±Ø³ÙŠØ¯Ø³ C-Class 2023',
                    car_brand: 'Ù…Ø±Ø³ÙŠØ¯Ø³',
                    car_model: 'C-Class',
                    car_year: '2023',
                    start_date: '2024-01-20',
                    end_date: '2024-01-25',
                    total_amount: 1500,
                    deposit_amount: 500,
                    status: 'approved',
                    pickup_location: 'ÙÙ†Ø¯Ù‚ Ø§Ù„Ø´Ø±Ù‚',
                    return_location: 'ÙÙ†Ø¯Ù‚ Ø§Ù„Ø´Ø±Ù‚',
                    renter_notes: 'Ø±Ø­Ù„Ø© Ø¹Ù…Ù„ ÙÙŠ Ø§Ù„Ø¯Ù…Ø§Ù…',
                    created_at: '2024-01-12T14:30:00Z',
                    owner_name: 'ÙØ§Ø·Ù…Ø© Ø¹Ù„ÙŠ',
                    owner_phone: '+966507654321'
                },
                {
                    id: 3,
                    car_id: 5,
                    renter_id: currentUserId,
                    car_name: 'Ù‡ÙŠÙˆÙ†Ø¯Ø§ÙŠ Ø³ÙˆÙ†Ø§ØªØ§ 2022',
                    car_brand: 'Ù‡ÙŠÙˆÙ†Ø¯Ø§ÙŠ',
                    car_model: 'Ø³ÙˆÙ†Ø§ØªØ§',
                    car_year: '2022',
                    start_date: '2024-02-01',
                    end_date: '2024-02-03',
                    total_amount: 300,
                    deposit_amount: 400,
                    status: 'completed',
                    pickup_location: 'Ù…Ø±ÙƒØ² Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„ØªØ¬Ø§Ø±ÙŠ',
                    return_location: 'Ù…Ø±ÙƒØ² Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„ØªØ¬Ø§Ø±ÙŠ',
                    renter_notes: 'Ø±Ø­Ù„Ø© Ø¹Ø§Ø¦Ù„ÙŠØ© Ù‚ØµÙŠØ±Ø©',
                    created_at: '2024-01-25T09:15:00Z',
                    owner_name: 'Ø®Ø§Ù„Ø¯ Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡',
                    owner_phone: '+966509876543'
                },
                {
                    id: 4,
                    car_id: 7,
                    renter_id: currentUserId,
                    car_name: 'Ù†ÙŠØ³Ø§Ù† Ø£Ù„ØªÙŠÙ…Ø§ 2023',
                    car_brand: 'Ù†ÙŠØ³Ø§Ù†',
                    car_model: 'Ø£Ù„ØªÙŠÙ…Ø§',
                    car_year: '2023',
                    start_date: '2024-02-10',
                    end_date: '2024-02-12',
                    total_amount: 400,
                    deposit_amount: 300,
                    status: 'rejected',
                    pickup_location: 'Ù…Ø·Ø§Ø± Ø§Ù„Ù…Ù„Ùƒ ÙÙ‡Ø¯ Ø§Ù„Ø¯ÙˆÙ„ÙŠ',
                    return_location: 'Ù…Ø·Ø§Ø± Ø§Ù„Ù…Ù„Ùƒ ÙÙ‡Ø¯ Ø§Ù„Ø¯ÙˆÙ„ÙŠ',
                    renter_notes: 'Ø±Ø­Ù„Ø© Ø¹Ù…Ù„ ÙÙŠ Ø§Ù„Ø¯Ù…Ø§Ù…',
                    created_at: '2024-01-30T16:45:00Z',
                    owner_name: 'Ø³Ø§Ø±Ø© Ø£Ø­Ù…Ø¯',
                    owner_phone: '+966505555555'
                }
            ];
            
            // Ø­ÙØ¸ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª
            localStorage.setItem('mockBookings', JSON.stringify(sampleBookings));
            
            alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø­Ø¬ÙˆØ²Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­! ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¢Ù† Ø§Ø®ØªØ¨Ø§Ø± ØµÙØ­Ø© Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª');
            showCurrentData();
        }

        function clearBookings() {
            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§ØªØŸ')) {
                localStorage.removeItem('mockBookings');
                alert('ØªÙ… Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª');
                showCurrentData();
            }
        }

        function showCurrentData() {
            const bookings = JSON.parse(localStorage.getItem('mockBookings') || '[]');
            const userData = JSON.parse(localStorage.getItem('userData') || '{}');
            
            const dataPreview = document.getElementById('dataPreview');
            dataPreview.innerHTML = `
                <h4>Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©:</h4>
                <p><strong>Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:</strong> ${userData.name || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'} (ID: ${userData.id || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'})</p>
                <p><strong>Ø¹Ø¯Ø¯ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª:</strong> ${bookings.length}</p>
                <h5>Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª:</h5>
                <pre>${JSON.stringify(bookings, null, 2)}</pre>
            `;
        }

        // Ø¹Ø±Ø¶ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        document.addEventListener('DOMContentLoaded', function() {
            showCurrentData();
        });
    </script>
</body>
</html>
