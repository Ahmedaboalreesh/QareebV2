<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ø®ØªØ¨Ø§Ø± ØªØ³Ø¬ÙŠÙ„ Firebase - Ø´Ø§Ø±Ùƒ Ø³ÙŠØ§Ø±ØªÙƒ</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <nav class="navbar">
            <div class="nav-container">
                <div class="nav-logo">
                    <i class="fas fa-car"></i>
                    <span>Ø´Ø§Ø±Ùƒ Ø³ÙŠØ§Ø±ØªÙƒ</span>
                </div>
                <ul class="nav-menu">
                    <li><a href="index.html">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a></li>
                    <li><a href="register.html">ØªØ³Ø¬ÙŠÙ„ Ø¬Ø¯ÙŠØ¯</a></li>
                    <li><a href="test-register-debug.html" class="active">Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªØ³Ø¬ÙŠÙ„</a></li>
                </ul>
            </div>
        </nav>
    </header>

    <!-- Test Section -->
    <section class="test-section">
        <div class="container">
            <div class="test-header">
                <h1>Ø§Ø®ØªØ¨Ø§Ø± ØªØ³Ø¬ÙŠÙ„ Firebase</h1>
                <p>ÙØ­Øµ ÙˆØ¥ØµÙ„Ø§Ø­ Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ ÙÙŠ Firebase</p>
            </div>

            <!-- Firebase Status -->
            <div class="status-section">
                <h3>Ø­Ø§Ù„Ø© Firebase</h3>
                <div class="status-grid">
                    <div class="status-card" id="firebaseStatus">
                        <i class="fas fa-fire"></i>
                        <div class="status-content">
                            <span class="status-label">Ø­Ø§Ù„Ø© Firebase</span>
                            <span class="status-value">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚...</span>
                        </div>
                    </div>
                    <div class="status-card" id="authStatus">
                        <i class="fas fa-user-check"></i>
                        <div class="status-content">
                            <span class="status-label">Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©</span>
                            <span class="status-value">ØºÙŠØ± Ù…ØªØµÙ„</span>
                        </div>
                    </div>
                    <div class="status-card" id="databaseStatus">
                        <i class="fas fa-database"></i>
                        <div class="status-content">
                            <span class="status-label">Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</span>
                            <span class="status-value">ØºÙŠØ± Ù…ØªØµÙ„</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Test Controls -->
            <div class="test-controls">
                <div class="test-card">
                    <h4>Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„</h4>
                    <div class="test-buttons">
                        <button class="btn btn-primary" onclick="testFirebaseConnection()">
                            <i class="fas fa-wifi"></i>
                            Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„
                        </button>
                        <button class="btn btn-success" onclick="testFirebaseService()">
                            <i class="fas fa-cog"></i>
                            Ø§Ø®ØªØ¨Ø§Ø± Firebase Service
                        </button>
                        <button class="btn btn-warning" onclick="testRegistration()">
                            <i class="fas fa-user-plus"></i>
                            Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªØ³Ø¬ÙŠÙ„
                        </button>
                    </div>
                </div>

                <div class="test-card">
                    <h4>Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠ</h4>
                    <div class="test-form">
                        <div class="form-group">
                            <label for="testEmail">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠ:</label>
                            <input type="email" id="testEmail" placeholder="test@example.com" value="test@example.com">
                        </div>
                        <div class="form-group">
                            <label for="testPassword">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ©:</label>
                            <input type="password" id="testPassword" placeholder="123456" value="123456">
                        </div>
                        <div class="form-group">
                            <label for="testName">Ø§Ù„Ø§Ø³Ù… Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠ:</label>
                            <input type="text" id="testName" placeholder="Ù…Ø³ØªØ®Ø¯Ù… ØªØ¬Ø±ÙŠØ¨ÙŠ" value="Ù…Ø³ØªØ®Ø¯Ù… ØªØ¬Ø±ÙŠØ¨ÙŠ">
                        </div>
                        <button class="btn btn-danger" onclick="testFullRegistration()">
                            <i class="fas fa-play"></i>
                            ØªØ´ØºÙŠÙ„ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„ÙƒØ§Ù…Ù„
                        </button>
                    </div>
                </div>
            </div>

            <!-- Results Display -->
            <div class="results-display">
                <h3>Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</h3>
                <div id="resultsList" class="results-list">
                    <p>Ù„Ù… ÙŠØªÙ… ØªÙ†ÙÙŠØ° Ø£ÙŠ Ø§Ø®ØªØ¨Ø§Ø± Ø¨Ø¹Ø¯</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-storage-compat.js"></script>
    
    <!-- Firebase Service -->
    <script src="firebase-service.js"></script>
    
    <script>
        let firebaseService = null;

        // Initialize page
        document.addEventListener('DOMContentLoaded', async function() {
            updateTestResults('ğŸš€ Ø¨Ø¯Ø¡ Ø§Ø®ØªØ¨Ø§Ø± Firebase', 'info');
            await checkFirebaseStatus();
        });

        // Check Firebase status
        async function checkFirebaseStatus() {
            try {
                updateTestResults('ğŸ” ÙØ­Øµ Ø­Ø§Ù„Ø© Firebase...', 'info');

                // Check Firebase initialization
                if (typeof firebase !== 'undefined' && firebase.apps.length > 0) {
                    updateStatus('firebaseStatus', 'âœ… Ù…ØªØµÙ„', 'success');
                    updateTestResults('âœ… Firebase SDK Ù…ØªØ§Ø­', 'success');
                } else {
                    updateStatus('firebaseStatus', 'âŒ ØºÙŠØ± Ù…ØªØµÙ„', 'error');
                    updateTestResults('âŒ Firebase SDK ØºÙŠØ± Ù…ØªØ§Ø­', 'error');
                    return;
                }

                // Check Authentication
                try {
                    if (firebase.auth) {
                        updateStatus('authStatus', 'âœ… Ù…ØªØµÙ„', 'success');
                        updateTestResults('âœ… Firebase Auth Ù…ØªØ§Ø­', 'success');
                    } else {
                        updateStatus('authStatus', 'âŒ ØºÙŠØ± Ù…ØªØ§Ø­', 'error');
                        updateTestResults('âŒ Firebase Auth ØºÙŠØ± Ù…ØªØ§Ø­', 'error');
                    }
                } catch (error) {
                    updateStatus('authStatus', 'âŒ Ø®Ø·Ø£', 'error');
                    updateTestResults('âŒ Ø®Ø·Ø£ ÙÙŠ Firebase Auth: ' + error.message, 'error');
                }

                // Check Database
                try {
                    const testRef = firebase.database().ref('test');
                    await testRef.set({ timestamp: Date.now() });
                    await testRef.remove();
                    updateStatus('databaseStatus', 'âœ… Ù…ØªØµÙ„', 'success');
                    updateTestResults('âœ… Firebase Database Ù…ØªØ§Ø­', 'success');
                } catch (error) {
                    updateStatus('databaseStatus', 'âŒ Ø®Ø·Ø£', 'error');
                    updateTestResults('âŒ Ø®Ø·Ø£ ÙÙŠ Firebase Database: ' + error.message, 'error');
                }

            } catch (error) {
                console.error('Error checking Firebase status:', error);
                updateTestResults('âŒ Ø®Ø·Ø£ ÙÙŠ ÙØ­Øµ Ø­Ø§Ù„Ø© Firebase: ' + error.message, 'error');
            }
        }

        // Test Firebase connection
        async function testFirebaseConnection() {
            try {
                updateTestResults('ğŸ” Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù€ Firebase...', 'info');

                // Test basic Firebase availability
                if (typeof firebase === 'undefined') {
                    throw new Error('Firebase SDK not loaded');
                }

                // Test database connection
                const testRef = firebase.database().ref('connection_test');
                await testRef.set({ 
                    timestamp: Date.now(),
                    test: 'connection_test'
                });
                
                const snapshot = await testRef.once('value');
                const data = snapshot.val();
                
                if (data && data.test === 'connection_test') {
                    await testRef.remove();
                    updateTestResults('âœ… Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ù†Ø¬Ø­', 'success');
                } else {
                    throw new Error('Database read/write test failed');
                }

            } catch (error) {
                console.error('Connection test error:', error);
                updateTestResults('âŒ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„ ÙØ´Ù„: ' + error.message, 'error');
            }
        }

        // Test Firebase Service
        async function testFirebaseService() {
            try {
                updateTestResults('ğŸ” Ø§Ø®ØªØ¨Ø§Ø± Firebase Service...', 'info');

                firebaseService = new FirebaseService();
                updateTestResults('âœ… Firebase Service ØªÙ… Ø¥Ù†Ø´Ø§Ø¤Ù‡ Ø¨Ù†Ø¬Ø§Ø­', 'success');

                // Wait a bit for initialization
                await new Promise(resolve => setTimeout(resolve, 2000));

                if (firebaseService.auth && firebaseService.db) {
                    updateTestResults('âœ… Firebase Service Ù…Ù‡ÙŠØ£ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­', 'success');
                } else {
                    throw new Error('Firebase Service not properly initialized');
                }

            } catch (error) {
                console.error('Firebase Service test error:', error);
                updateTestResults('âŒ Ø§Ø®ØªØ¨Ø§Ø± Firebase Service ÙØ´Ù„: ' + error.message, 'error');
            }
        }

        // Test registration
        async function testRegistration() {
            try {
                updateTestResults('ğŸ” Ø§Ø®ØªØ¨Ø§Ø± Ø¯Ø§Ù„Ø© Ø§Ù„ØªØ³Ø¬ÙŠÙ„...', 'info');

                if (!firebaseService) {
                    firebaseService = new FirebaseService();
                    await new Promise(resolve => setTimeout(resolve, 2000));
                }

                // Test with dummy data
                const testUserData = {
                    email: 'test@example.com',
                    password: '123456',
                    full_name: 'Ù…Ø³ØªØ®Ø¯Ù… ØªØ¬Ø±ÙŠØ¨ÙŠ',
                    phone: '0500000000',
                    city: 'Ø§Ù„Ø±ÙŠØ§Ø¶',
                    user_type: 'renter',
                    newsletter: false
                };

                updateTestResults('ğŸ”„ Ù…Ø­Ø§ÙˆÙ„Ø© ØªØ³Ø¬ÙŠÙ„ Ù…Ø³ØªØ®Ø¯Ù… ØªØ¬Ø±ÙŠØ¨ÙŠ...', 'info');
                
                const result = await firebaseService.registerUser(testUserData);
                
                if (result && result.user && result.profile) {
                    updateTestResults('âœ… Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ù†Ø¬Ø­', 'success');
                    updateTestResults(`ğŸ“ ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: ${result.user.uid}`, 'info');
                    
                    // Clean up - delete test user
                    try {
                        await firebaseService.auth.currentUser.delete();
                        updateTestResults('ğŸ§¹ ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠ', 'info');
                    } catch (cleanupError) {
                        updateTestResults('âš ï¸ ÙØ´Ù„ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠ: ' + cleanupError.message, 'warning');
                    }
                } else {
                    throw new Error('Registration result is invalid');
                }

            } catch (error) {
                console.error('Registration test error:', error);
                
                let errorMessage = 'Ø®Ø·Ø£ ÙÙŠ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªØ³Ø¬ÙŠÙ„';
                
                if (error.code) {
                    switch (error.code) {
                        case 'auth/email-already-in-use':
                            errorMessage = 'Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠ Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ø§Ù„ÙØ¹Ù„';
                            break;
                        case 'auth/invalid-email':
                            errorMessage = 'Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠ ØºÙŠØ± ØµØ­ÙŠØ­';
                            break;
                        case 'auth/weak-password':
                            errorMessage = 'ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ© Ø¶Ø¹ÙŠÙØ©';
                            break;
                        case 'auth/operation-not-allowed':
                            errorMessage = 'Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨ ØºÙŠØ± Ù…Ø³Ù…ÙˆØ­';
                            break;
                        case 'auth/network-request-failed':
                            errorMessage = 'Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø´Ø¨ÙƒØ©';
                            break;
                        case 'auth/identity-toolkit-api-has-not-been-used-in-project-382655918338-before-or-it-is-disabled.-enable-it-by-visiting-https://console.developers.google.com/apis/api/identitytoolkit.googleapis.com/overview?project=382655918338-then-retry.-if-you-enabled-this-api-recently,-wait-a-few-minutes-for-the-action-to-propagate-to-our-systems-and-retry.':
                            errorMessage = 'Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Firebase: ÙŠØ¬Ø¨ ØªÙØ¹ÙŠÙ„ Identity Toolkit API. Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø±Ø§Ø¨Ø· ÙÙŠ Console Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„ØªØ¹Ù„ÙŠÙ…Ø§Øª.';
                            break;
                        default:
                            errorMessage = `Ø®Ø·Ø£ ÙÙŠ Firebase: ${error.message}`;
                    }
                } else if (error.message) {
                    errorMessage = error.message;
                }
                
                updateTestResults('âŒ ' + errorMessage, 'error');
            }
        }

        // Test full registration with form data
        async function testFullRegistration() {
            try {
                const testEmail = document.getElementById('testEmail').value;
                const testPassword = document.getElementById('testPassword').value;
                const testName = document.getElementById('testName').value;

                if (!testEmail || !testPassword || !testName) {
                    updateTestResults('âŒ ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ©', 'error');
                    return;
                }

                updateTestResults(`ğŸ” Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„ÙƒØ§Ù…Ù„ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…: ${testEmail}`, 'info');

                if (!firebaseService) {
                    firebaseService = new FirebaseService();
                    await new Promise(resolve => setTimeout(resolve, 2000));
                }

                const userData = {
                    email: testEmail,
                    password: testPassword,
                    full_name: testName,
                    phone: '0500000000',
                    city: 'Ø§Ù„Ø±ÙŠØ§Ø¶',
                    user_type: 'renter',
                    newsletter: false
                };

                updateTestResults('ğŸ”„ Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ ØªØ¬Ø±ÙŠØ¨ÙŠ...', 'info');
                
                const result = await firebaseService.registerUser(userData);
                
                if (result && result.user && result.profile) {
                    updateTestResults('âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠ Ø¨Ù†Ø¬Ø§Ø­', 'success');
                    updateTestResults(`ğŸ“ Ù…Ø¹Ø±Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: ${result.user.uid}`, 'info');
                    updateTestResults(`ğŸ“§ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ: ${result.profile.email}`, 'info');
                    updateTestResults(`ğŸ‘¤ Ø§Ù„Ø§Ø³Ù…: ${result.profile.full_name}`, 'info');
                    
                    // Clean up
                    try {
                        await firebaseService.auth.currentUser.delete();
                        updateTestResults('ğŸ§¹ ØªÙ… Ø­Ø°Ù Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠ', 'info');
                    } catch (cleanupError) {
                        updateTestResults('âš ï¸ ÙØ´Ù„ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠ: ' + cleanupError.message, 'warning');
                    }
                } else {
                    throw new Error('Registration result is invalid');
                }

            } catch (error) {
                console.error('Full registration test error:', error);
                
                let errorMessage = 'Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠ';
                
                if (error.code) {
                    switch (error.code) {
                        case 'auth/email-already-in-use':
                            errorMessage = 'Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ø§Ù„ÙØ¹Ù„ - Ø¬Ø±Ø¨ Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø¢Ø®Ø±';
                            break;
                        case 'auth/invalid-email':
                            errorMessage = 'Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØºÙŠØ± ØµØ­ÙŠØ­';
                            break;
                        case 'auth/weak-password':
                            errorMessage = 'ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø¶Ø¹ÙŠÙØ© Ø¬Ø¯Ø§Ù‹';
                            break;
                        case 'auth/operation-not-allowed':
                            errorMessage = 'Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨ ØºÙŠØ± Ù…Ø³Ù…ÙˆØ­ Ø­Ø§Ù„ÙŠØ§Ù‹';
                            break;
                        case 'auth/network-request-failed':
                            errorMessage = 'Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø´Ø¨ÙƒØ©';
                            break;
                        case 'auth/identity-toolkit-api-has-not-been-used-in-project-382655918338-before-or-it-is-disabled.-enable-it-by-visiting-https://console.developers.google.com/apis/api/identitytoolkit.googleapis.com/overview?project=382655918338-then-retry.-if-you-enabled-this-api-recently,-wait-a-few-minutes-for-the-action-to-propagate-to-our-systems-and-retry.':
                            errorMessage = 'Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Firebase: ÙŠØ¬Ø¨ ØªÙØ¹ÙŠÙ„ Identity Toolkit API. Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø±Ø§Ø¨Ø· ÙÙŠ Console Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„ØªØ¹Ù„ÙŠÙ…Ø§Øª.';
                            break;
                        default:
                            errorMessage = `Ø®Ø·Ø£ ÙÙŠ Firebase: ${error.message}`;
                    }
                } else if (error.message) {
                    errorMessage = error.message;
                }
                
                updateTestResults('âŒ ' + errorMessage, 'error');
            }
        }

        // Update status display
        function updateStatus(elementId, value, type) {
            try {
                const element = document.getElementById(elementId);
                if (element) {
                    const statusValue = element.querySelector('.status-value');
                    if (statusValue) {
                        statusValue.textContent = value;
                        statusValue.className = `status-value ${type}`;
                    }
                }
            } catch (error) {
                console.error('Error updating status:', error);
            }
        }

        // Update test results
        function updateTestResults(message, type) {
            try {
                const resultsList = document.getElementById('resultsList');
                const timestamp = new Date().toLocaleTimeString('ar-SA');
                
                const resultElement = document.createElement('div');
                resultElement.className = `result-item ${type}`;
                resultElement.innerHTML = `
                    <span class="timestamp">${timestamp}</span>
                    <span class="message">${message}</span>
                `;
                
                resultsList.appendChild(resultElement);
                resultsList.scrollTop = resultsList.scrollHeight;
                
                console.log(`[${type.toUpperCase()}] ${message}`);
            } catch (error) {
                console.error('Error updating test results:', error);
            }
        }
    </script>

    <style>
        .test-section {
            padding: 2rem 0;
        }

        .test-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .test-header h1 {
            color: #2c3e50;
            margin-bottom: 0.5rem;
        }

        .test-header p {
            color: #7f8c8d;
        }

        .status-section {
            margin-bottom: 2rem;
        }

        .status-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .status-card {
            background: white;
            border-radius: 8px;
            padding: 1rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .status-card i {
            font-size: 1.5rem;
            color: #3498db;
        }

        .status-content {
            flex: 1;
        }

        .status-label {
            display: block;
            font-weight: 600;
            color: #2c3e50;
        }

        .status-value {
            display: block;
            font-size: 0.9rem;
            margin-top: 0.25rem;
        }

        .status-value.success {
            color: #27ae60;
        }

        .status-value.error {
            color: #e74c3c;
        }

        .test-controls {
            margin-bottom: 2rem;
        }

        .test-card {
            background: white;
            border-radius: 8px;
            padding: 1.5rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 1rem;
        }

        .test-card h4 {
            color: #2c3e50;
            margin-bottom: 1rem;
        }

        .test-buttons {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .test-form {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .form-group label {
            color: #2c3e50;
            font-weight: 600;
        }

        .form-group input {
            padding: 0.75rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-family: inherit;
        }

        .btn {
            padding: 0.75rem 1rem;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-family: inherit;
            font-size: 0.9rem;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: #3498db;
            color: white;
        }

        .btn-primary:hover {
            background: #2980b9;
        }

        .btn-success {
            background: #27ae60;
            color: white;
        }

        .btn-success:hover {
            background: #229954;
        }

        .btn-warning {
            background: #f39c12;
            color: white;
        }

        .btn-warning:hover {
            background: #e67e22;
        }

        .btn-danger {
            background: #e74c3c;
            color: white;
        }

        .btn-danger:hover {
            background: #c0392b;
        }

        .results-display {
            margin-bottom: 2rem;
        }

        .results-list {
            max-height: 400px;
            overflow-y: auto;
            background: #f8f9fa;
            border-radius: 8px;
            padding: 1rem;
        }

        .result-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 0.5rem 0;
            border-bottom: 1px solid #ecf0f1;
        }

        .result-item:last-child {
            border-bottom: none;
        }

        .result-item .timestamp {
            font-size: 0.8rem;
            color: #7f8c8d;
            min-width: 80px;
        }

        .result-item .message {
            flex: 1;
        }

        .result-item.success .message {
            color: #27ae60;
        }

        .result-item.error .message {
            color: #e74c3c;
        }

        .result-item.warning .message {
            color: #f39c12;
        }

        .result-item.info .message {
            color: #3498db;
        }
    </style>
</body>
</html>
